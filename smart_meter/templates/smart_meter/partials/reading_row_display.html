{# templates/smart_meter/partials/reading_row_display.html #}
<tr
  hx-get="{% url 'smart_meter:meter_reading_row_edit' r.pk %}"
  hx-trigger="dblclick"
  hx-target="this"
  hx-swap="outerHTML"
  title="Double-click to edit"
  style="cursor:pointer;"
>
  <td class="col-idx">{{ sno }}</td>

  <td class="col-ts text-nowrap">
    <div class="d-none d-sm-block">{{ r.ts|date:"Y-m-d H:i:s" }}</div>
    <div class="d-sm-none">
      <div>{{ r.ts|date:"Y-m-d" }}</div>
      <div>{{ r.ts|date:"H:i:s" }}</div>
    </div>
  </td>

  {# Property: 8 chars; unit under it on small (no “Unit” word) #}
  <td class="col-prop" title="{{ r.meter.unit.property.property_name }}">
    <div>{{ r.meter.unit.property.property_name|slice:":8" }}</div>
    <div class="text-muted d-sm-none sm-unit-under-prop">{{ r.meter.unit.unit_number }}</div>
  </td>

  <td class="col-unit">{{ r.meter.unit.unit_number }}</td>

  <td class="col-meter">
    <div><span >{{ r.meter.meter_number }}</span></div>
    <div class="text-muted d-sm-none sm-meter-sub">
      <div class="sm-meter-line1">
        <span class="sm-meter-v">{{ r.voltage_a|default_if_none:""|floatformat:0 }}V</span>,
        <span class="sm-meter-a">{{ r.current_a|default_if_none:""|floatformat:4 }}A</span>,
        <span class="sm-meter-w">{{ r.total_power|default_if_none:""|floatformat:3 }}W</span>
      </div>
      
    </div>
  </td>

  <td class="col-ip toggle-col-ip d-none">{{ r.source_ip|default_if_none:"" }}</td>
  <td class="col-port toggle-col-port d-none">{{ r.source_port|default_if_none:"" }}</td>

  <td class="col-volt">{{ r.voltage_a|default_if_none:""|floatformat:1 }}</td>
  <td class="col-amp">{{ r.current_a|default_if_none:""|floatformat:3 }}</td>
  <td class="col-watt">{{ r.total_power|default_if_none:""|floatformat:3 }}</td>

  <td >
    <div class="col-energy fw-bold">{{ r.total_energy|default_if_none:""|floatformat:3 }}</div>
    <div class="text-muted d-sm-none sm-pf">PF {{ r.pf_total|default_if_none:""|floatformat:3 }}</div>
  </td>
  <td class="col-pf-smpf">{{ r.pf_total|default_if_none:""|floatformat:3 }}</td>
</tr>

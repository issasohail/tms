<div class="d-flex actions-wrap">
    {% if view_url %}
        <a href="{{ view_url }}" class="btn btn-sm btn-info btn-view"" style="flex: 1 1 auto;">
            <i class="fas fa-eye"></i></i><span class="btn-label"> View</span>
        </a>
    {% endif %}
    {% if edit_url %}
        <a href="{{ edit_url }}" class="btn btn-sm btn-warning btn-edit" style="flex: 1 1 auto;">
            <i class="fas fa-edit"></i></i><span class="btn-label"> Edit</span>
        </a>
    {% endif %}
    {% if delete_url %}
        <a href="{{ delete_url }}" class="btn btn-sm btn-danger btn-delete" style="flex: 1 1 auto;">
            <i class="fas fa-trash"></i> </i><span class="btn-label">Delete</span>
        </a>
    {% endif %}

    {# Receipt button in Actions (works on big & small) #}
    {% if receipt_urls %}
    <button type="button"
            class="btn btn-outline-secondary btn-sm action-btn  btn-receipt view-receipt receipt-mobile-btn"
            data-urls="{{ receipt_urls|join:'|' }}"
            title="Receipt" aria-label="Open receipt(s)">
        <i class="bi bi-receipt"></i>
        <span class="btn-text d-none d-md-inline ms-1">Receipt</span>
    </button>
    {% endif %}



    {% if make_payment_url %}
        <a href="{{ make_payment_url }}" class="btn btn-sm btn-success" style="flex: 1 1 auto;">
            <i class="fas fa-money-bill-wave"></i></i><span class="btn-label"> Pay</span>
        </a>
    {% endif %}
    {% if send_message_url %}
        <a href="{{ send_message_url }}" class="btn btn-sm btn-primary" style="flex: 1 1 auto;">
            <i class="fas fa-envelope"></i> </i><span class="btn-label">Message</span>
        </a>
    {% endif %}
      {% if view_ledger_url %}
        <a href="{{ view_ledger_url }}" class="btn btn-sm btn-secondary" style="flex: 1 1 auto;">
            <i class="fas fa-file-invoice-dollar"></i> </i><span class="btn-label">Ledger</span>
        </a>
    {% endif %}
    {% if send_ledger_url %}
        <a href="{{ send_ledger_url }}" class="btn btn-sm btn-info" style="flex: 1 1 auto;">
            <i class="fas fa-paper-plane"></i></i><span class="btn-label"> Send Ledger</span>
        </a>
    {% endif %}

    {# Payment Receipt Button (for payments app) #}
    {# Payment Receipt Button (for payments app) #}
    
    {% if is_payment_row %}
        {% if record.lease.tenant.phone %}
            <button
            onclick="sendWhatsAppSingle(
                '{{ record.pk }}',
                '{{ record.lease.tenant.phone|escapejs }}',
                '{{ record.lease.tenant.first_name|escapejs }}',
                '{{ record.lease.unit.property.property_name|escapejs }}',
                '{{ record.lease.unit.unit_number|escapejs }}',
                '{{ record.amount }}',
                '{{ record.payment_date|date:"M d, Y" }}',
                '{{ record.lease.get_balance }}',
                '{{ record.lease.security_deposit }}',
                '{{ record.lease.security_deposit_paid|yesno:"true,false" }}',
                '{{ record.lease.start_date|date:"M d, Y" }}',
                '{{ record.lease.end_date|date:"M d, Y" }}'
            )"
            class="btn btn-success btn-sm whatsapp-btn"
            style="flex: 1 1 auto;"
            title="Send WhatsApp Receipt"
            >
            <i class="fab fa-whatsapp"></i><span class="btn-label"> Receipt</span>
            </button>
        {% else %}
            <button class="btn btn-secondary btn-sm disabled" style="flex: 1 1 auto;" title="No phone number available">
            <i class="fab fa-whatsapp"></i><span class="btn-label"> Receipt</span>
            </button>
        {% endif %}
        {% endif %}




    {# Remind via WhatsApp (for leases) â€” always visible, disabled if balance is zero or no phone #}
    {% if is_lease_row %}
        {% if has_balance and whatsapp_url %}
            <button onclick="{{ whatsapp_url }}"
                    class="btn btn-success btn-sm whatsapp-btn"
                    style="flex: 1 1 auto;"
                    title="Send WhatsApp Reminder">
                <i class="fab fa-whatsapp"></i> <span class="btn-label">Remind</span>
            </button>
        {% else %}
            <button class="btn btn-secondary btn-sm disabled whatsapp-btn"
                    style="flex: 1 1 auto;"
                    title="No balance or phone">
                <i class="fab fa-whatsapp"></i> <span class="btn-label">Remind</span>
            </button>
        {% endif %}
    {% endif %}

    
</div>

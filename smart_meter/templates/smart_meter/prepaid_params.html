{% extends "base.html" %}
{% load static %}
{% block content %}
{% include "smart_meter/meterbar.html" %}
<div class="container py-4">
  <h1 class="mb-3">Prepaid Parameters-test</h1>
  <form method="post" class="card p-3 shadow-sm">
    {% csrf_token %}
    <div class="row g-3">
      <div class="col-12 col-md-4">{{ form.meter.label_tag }} {{ form.meter }}</div>

      <div class="col-12"><h5 class="mt-3">Prices (Rs/kWh)</h5></div>
      <div class="col-6 col-md-3">{{ form.rate1_price_1.label_tag }} {{ form.rate1_price_1 }}</div>
      <div class="col-6 col-md-3">{{ form.rate2_price_1.label_tag }} {{ form.rate2_price_1 }}</div>

      <div class="col-12"><h5 class="mt-3">Alerts & Limits (Rs)</h5></div>
      <div class="col-6 col-md-3">{{ form.alarm_amount_1.label_tag }} {{ form.alarm_amount_1 }}</div>
      <div class="col-6 col-md-3">{{ form.alarm_amount_2.label_tag }} {{ form.alarm_amount_2 }}</div>
      <div class="col-6 col-md-3">{{ form.overdraft_limit.label_tag }} {{ form.overdraft_limit }}</div>

      <div class="col-12"><h5 class="mt-3">Switch Times (yymmddhhmm)</h5></div>
      <div class="col-6 col-md-3">{{ form.rate_switch_time.label_tag }} {{ form.rate_switch_time }}</div>
      <div class="col-6 col-md-3">{{ form.step_switch_time.label_tag }} {{ form.step_switch_time }}</div>

      <div class="col-12"><h5 class="mt-3">Steps (optional)</h5></div>
      <div class="col-6 col-md-3">{{ form.step1_value_1.label_tag }} {{ form.step1_value_1 }}</div>
      <div class="col-6 col-md-3">{{ form.step2_value_1.label_tag }} {{ form.step2_value_1 }}</div>
    </div>

    <div class="mt-4">
      <button class="btn btn-primary">Save & Send to Meter</button>
      <a class="btn btn-secondary" href="{% url 'smart_meter:meter_switch' %}">Switch Power</a>
    </div>
  </form>
  {% if listener_host or listener_port %}
    <p class="text-muted mt-2">
      Sending via listener at <strong>{{ listener_host }}:{{ listener_port }}</strong>
    </p>
    {% endif %}

  <p class="text-muted mt-3">Tip: leave switch times as 0 to send “no schedule”.</p>
</div>
{% endblock %}

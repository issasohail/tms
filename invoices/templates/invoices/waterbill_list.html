{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center">
  <h4>Water Bills</h4>
  <a href="{% url 'invoices:waterbill_add' %}" class="btn btn-primary btn-sm">Add Water Bill</a>
</div>
<table class="table table-sm mt-3">
  <thead>
    <tr class="table-light">
      <th>Property</th>
      <th>Period</th>
      <th class="text-end">Total Amount</th>
      <th>Description</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for b in bills %}
    <tr>
      <td>{{ b.property }}</td>
      <td>{{ b.period|date:"M Y" }}</td>
      <td class="text-end">Rs. {{ b.total_amount|floatformat:2 }}</td>
      <td>{{ b.description|default:"â€”" }}</td>
      <td>
        {% if b.posted %}<span class="badge bg-success">Posted</span>
        {% else %}<span class="badge bg-warning text-dark">Pending</span>{% endif %}
      </td>
      <td>
        <a class="btn btn-sm btn-primary" href="{% url 'invoices:waterbill_edit' b.id %}">Edit</a>
        {% if not b.posted %}
          <a class="btn btn-sm btn-success" href="{% url 'invoices:waterbill_post' b.id %}">Post</a>
        {% endif %}
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="text-center text-muted">No water bills yet.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
